Index: BMS/urls.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.contrib import admin\nfrom django.urls import path\nfrom . import views\n\n\n\n\nurlpatterns = [\n    # path('admin/', admin.site.urls),\n    path('', views.loginPage, name='login'),\n    path('logout/', views.logoutUser, name='logout'),\n    path('register/', views.registerPage, name='register'),\n    path('registerAdmin/', views.registerAdmin),\n    path('mainpage/', views.mainPage, name='mainPage'),\n    path('addBooks/', views.addBooks, name='addBooks'),\n    path('buildbook/', views.buildBooks, name='buildbook'),\n    path('borrowrecord', views.borrowRecord, name='borrowrecord'),\n    path('borrow/', views.borrowbook, name='borrow'),\n    path('querybook/', views.querybooks, name='querybook'),\n    path('reservation/', views.Reservation, name='reservation'),\n    path('querybookinfo/', views.querybookinfo, name='querybookinfo'),\n    path('reservationRecord/', views.reservationRecord, name='reservationRecord')\n]\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- BMS/urls.py	(revision 8cff9ebe5b78b48501baa3f047f50117bfdc0056)
+++ BMS/urls.py	(date 1592750648807)
@@ -19,5 +19,6 @@
     path('querybook/', views.querybooks, name='querybook'),
     path('reservation/', views.Reservation, name='reservation'),
     path('querybookinfo/', views.querybookinfo, name='querybookinfo'),
-    path('reservationRecord/', views.reservationRecord, name='reservationRecord')
+    path('reservationRecord/', views.reservationRecord, name='reservationRecord'),
+    path('returnBook/', views.returnBook, name='returnBook')
 ]
Index: BMS/views.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.shortcuts import render, redirect\nfrom django.http import HttpResponseRedirect\nfrom django.contrib.auth.forms import UserCreationForm\nfrom .forms import *\nfrom .models import readers, bms_admin, booklist, books, borrow\nfrom hashlib import sha1\nfrom django.contrib import messages\nfrom django.contrib.auth import authenticate, login, logout\nfrom django.contrib.auth.decorators import login_required\nfrom django.db.models import Count\nfrom django.core.paginator import Paginator\nimport datetime, timedelta, time\nfrom apscheduler.schedulers.background import BackgroundScheduler\nfrom django_apscheduler.jobstores import DjangoJobStore, register_events, register_job\n\nscheduler = BackgroundScheduler()\nscheduler.add_jobstore(DjangoJobStore(), 'default')\n\ndef updateReservationRecord():\n    wait_list = []\n    print(\"scan DB && under updating:\")\n    result = reservation.objects.raw('select id from BMS_reservation '\n                                     'where DATEDIFF(CURDATE(), BMS_reservation.reserveTime)'\n                                     '>= BMS_reservation.reserveLength')\n    for item in result:\n        wait_list.append(item.id)\n        print(item.id)\n    if len(wait_list):\n        for id in wait_list:\n            reservation.objects.filter(id=id).delete()\n\n\n@register_job(scheduler, 'interval', seconds=86400)#86400\ndef test_job():\n    time.sleep(4)\n    updateReservationRecord()\n\n\n\n\nregister_events(scheduler)\n\n# scheduler.start()\n# print('Scheduler started!')\n\n\n\n\n@login_required(login_url='login')\ndef mainPage(request):\n    return render(request, 'BMS/mainpage.html')\n\n\ndef registerPage(request):\n    form = CreateUserForm()\n\n    if request.method == 'POST':\n        form = CreateUserForm(request.POST)\n        if form.is_valid():\n            print('**')\n            print(form.data)\n            print(form.data['readerId'])\n            form.save()\n        else:\n            print('error')\n\n    context = {'form': form}\n    return render(request, 'BMS/register.html', context)\n\n\ndef registerAdmin(request):\n    if request.method == 'POST':\n        form = CreateAdminForm(request.POST)\n        if form.is_valid():\n            gh = form.cleaned_data['gh']\n            xm = form.cleaned_data['xm']\n            pwd = form.cleaned_data['password1']\n            cpwd = form.cleaned_data['password2']\n            # 加密\n            sh1 = sha1()\n            sh1.update(pwd.encode('utf-8'))\n            pwdd = sh1.hexdigest()\n            if pwd != cpwd:\n                return redirect('/')\n            bms_admin.objects.get_or_create(gh=gh, username=xm, password=pwdd)\n            msg = 'Admin register success'\n            return render(request, 'BMS/registerAdmin.html')\n    else:\n        form = CreateAdminForm()\n        context = {'form': form}\n        return render(request, 'BMS/registerAdmin.html', context)\n\n\ndef loginPage(request):\n    if request.method == 'POST':\n        form = loginForm(request.POST)\n        gh_data = form.data['gh']\n        password_data = form.data['password']\n        user = bms_admin.objects.filter(gh=gh_data).first()\n        if user:\n            sh1 = sha1()\n            sh1.update(password_data.encode('utf-8'))\n            pwd = sh1.hexdigest()\n            print(user)\n            if user.password == pwd:\n                login(request, user)\n                messages.success(request, \"成功登录\")\n                return redirect('mainPage')\n            else:\n                messages.error(request, \"登录失败\")\n                return redirect('login')\n        else:\n            messages.error(request, '登录失败')\n    form = loginForm()\n    context = {'form': form}\n    return render(request, 'BMS/Login.html', context)\n\n\ndef logoutUser(request):\n    logout(request)\n    return redirect('login')\n\n\ndef addBooks(request):\n    form = addBooksForm()\n    if request.method == 'POST':\n        print('form=', request.POST)\n        form = addBooksForm(request.POST)\n        if form.is_valid():\n            form.save()\n            messages.success(request, \"成功录入\")\n            return redirect('addBooks')\n        else:\n            print('error=', form.errors)\n            messages.error(request, \"录入失败，重新输入\")\n            return redirect('addBooks')\n\n    context = {'form': form}\n    return render(request, 'BMS/addBooks.html', context)\n\n\ndef buildBooks(request):\n    form = buildbookForm()\n    if request.method == 'POST':\n\n        form = buildbookForm(request.POST)\n        print('form=', form)\n        print('form.data=',form.data)\n        if form.is_valid():\n            #form.save()\n            messages.success(request, \"成功录入\")\n            redirect('buildbook')\n        else:\n            print('error=', form.errors)\n            messages.warning(request, \"录入失败\")\n            redirect('buildbook')\n    context = {'form': form}\n    return render(request, 'BMS/buildbook.html', context)\n\n@login_required(login_url='login')\ndef querybookinfo(request):\n    books = None\n    count_borrow = None\n    count_borrow2 = None\n    if request.method == 'POST':\n        sec = request.POST.get('serc')\n        condition = request.POST.get('condition')\n        if sec == 'all':\n            books = booklist.objects.filter(bookName=condition)\n            count_borrow = {}\n            count_borrow2 = {}\n            for book in books:\n                count_temp = book.books_set.filter(status='已借出').aggregate(Count('ID'))\n                count_temp2 = book.books_set.filter(status='不外借').aggregate(Count('ID'))\n                print(count_temp)\n                if book.ISBN not in count_borrow:\n                    count_borrow[book.ISBN] = count_temp['ID__count']\n                if book.ISBN not in count_borrow2:\n                    count_borrow2[book.ISBN] = count_temp2['ID__count']\n            context = {'books': books, 'count_borrow': count_borrow}\n            return render(request, 'BMS/queryBookInfo.html', context, )\n        else:\n            books = booklist.objects.filter(ISBN=condition)\n            count_borrow = {}\n            count_borrow2 = {}\n            for book in books:\n                count_temp = book.books_set.filter(status='已借出').aggregate(Count('ID'))\n                count_temp2 = book.books_set.filter(status='不外借').aggregate(Count('ID'))\n                print(count_temp)\n                if book.ISBN not in count_borrow:\n                    count_borrow[book.ISBN] = count_temp['ID__count']\n                if book.ISBN not in count_borrow2:\n                    count_borrow2[book.ISBN] = count_temp2['ID__count']\n            context = {'books': books, 'count_borrow': count_borrow}\n            return render(request, 'BMS/queryBookInfo.html', context, )\n\n    books = booklist.objects.all()\n    count_borrow = {}\n    count_borrow2 = {}\n    for book in books:\n        count_temp = book.books_set.filter(status='已借出').aggregate(Count('ID'))\n        count_temp2 = book.books_set.filter(status='不外借').aggregate(Count('ID'))\n        # print(count_temp)\n        if book.ISBN not in count_borrow:\n            count_borrow[book.ISBN] = count_temp['ID__count']\n        if book.ISBN not in count_borrow2:\n            count_borrow2[book.ISBN] = count_temp2['ID__count']\n    print(count_borrow)\n    paginator = Paginator(books, 7)\n    page = request.GET.get('page')\n    books = paginator.get_page(page)\n\n    context = {'books': books, 'count_borrow': count_borrow, 'count_borrow2':count_borrow2}\n    return render(request, 'BMS/queryBookInfo.html', context, )\n\n\ndef querybooks(request):\n    ISBN = request.GET.get('ISBN')\n    print(ISBN)\n    book = books.objects.filter(ISBN=ISBN, status='未借出')\n    return render(request, 'BMS/queryBooks.html', {'books': book})\n\n\ndef Reservation(request):\n    form = reservationForm()\n    if request.method == 'POST':\n        postcontent = request.POST.copy()\n        print('post=', postcontent)\n        userId = postcontent['readerId_id']\n        userlist = readers.objects.filter(readerId=userId).values('readerId')\n        form = reservationForm(postcontent)\n\n        print('form=',form.data)\n        print('length=',form.data['reserveLength'])\n        print('isbn=', form.data['ISBN_id'])\n        print('readerId=',form.data['readerId_id'])\n        print(form.is_valid())\n        if len(userlist) > 0:\n            reader_obj = readers.objects.get(readerId=form.data['readerId_id'])\n            booklist_obj =  booklist.objects.get(ISBN=form.data['ISBN_id'])\n            result = reservation.objects.filter(readerId = reader_obj, ISBN = booklist_obj).values('id')\n            if len(result) == 0:\n                messages.success(request, \"预约成功\")\n                reservation.objects.create(readerId = reader_obj, ISBN = booklist_obj, reserveLength=form.data['reserveLength'])\n                return redirect('reservation')\n            messages.error(request, \"该用户已经预约过该图书\")\n            return redirect('reservation')\n        else:\n            messages.error(request, \"该用户不存在，请重新输入\")\n            return redirect('reservation')\n    context = {'form': form}\n    return render(request, 'BMS/reservation.html', context)\n\ndef reservationRecord(request):\n    id = request.GET.get('id')\n    isbn = request.GET.get('isbn')\n    #print(type(isbn),isbn=='ISBN7-302-02368-24')\n    if id is not None:\n        reservation.objects.filter(id=id).delete()\n\n    books = booklist.objects.all()\n    bookname = {}\n    for book in books:\n        #print(book.ISBN,book.bookName)\n        bookname[book.ISBN] = book.bookName\n\n    reservations = reservation.objects.all().order_by()\n    if request.method == 'POST':\n        sec = request.POST.get('serc')\n        condition = request.POST.get('condition')\n        if sec == 'isbn':\n            print('*')\n            reservations = reservation.objects.filter(ISBN=condition)\n            paginator = Paginator(reservations, 7)\n            page = request.GET.get('page')\n            pageInfo = paginator.get_page(page)\n            print(pageInfo)\n            context = {'pageInfo': pageInfo, 'reservations': reservations, 'bookname':bookname}\n            return render(request, 'BMS/reservationRecord.html', context)\n        else:\n            print('**')\n            reservations = reservation.objects.filter(readerId=condition)\n            paginator = Paginator(reservations, 7)\n            page = request.GET.get('page')\n            pageInfo = paginator.get_page(page)\n            print(pageInfo)\n            context = {'pageInfo': pageInfo, 'reservations': reservations, 'bookname':bookname}\n            return render(request, 'BMS/reservationRecord.html', context)\n\n    paginator = Paginator(reservations, 7)\n    page = request.GET.get('page')\n    pageInfo = paginator.get_page(page)\n    print(pageInfo)\n    #print(bookname)\n    context = {'pageInfo': pageInfo, 'reservations':reservations, 'bookname':bookname}\n    return render(request, 'BMS/reservationRecord.html', context)\n\ndef borrowbook(request):\n    book_id = request.GET.get('ID')\n    print(book_id)\n    borrow_time = datetime.datetime.now().strftime('%Y-%m-%d')\n    return_time = (datetime.datetime.now() + datetime.timedelta(days=30)).strftime('%Y-%m-%d')\n\n    time = {}\n    time['borrow'] = borrow_time\n    time['return'] = return_time\n\n    if request.method == 'POST':\n        form = borrowForm(request.POST)\n        reader_id = readers.objects.filter(readerId=form.data['readerId'])\n        if reader_id:\n            count_temp = borrow.objects.filter(readerId=form.data['readerId']).aggregate(Count('id'))\n            print(count_temp,'***')\n            if count_temp['id__count'] >= 10:\n                messages.info(request, '您已经借阅10本书，请先还书')\n                return HttpResponseRedirect(\"/borrow/?ID=\"+book_id)\n            else:\n                borrow.objects.get_or_create(readerId=readers.objects.get(readerId=form.data['readerId']), returnTime=return_time,\n                                        borrowTime=borrow_time, bookId=books.objects.get(ID=book_id), status='未归还')\n                book = books.objects.get(ID=book_id)\n                book.status='已借出'\n                book.save()\n                messages.success(request,'借阅成功')\n                return redirect('mainPage')\n        else:\n            messages.error(request, '读者号有误，请重新输入')\n            return HttpResponseRedirect(\"/borrow/?ID=\"+book_id)\n\n    book_id = request.GET.get('ID')\n    print(book_id)\n    # bookChosen = books.objects.get(ID=book_id)\n    ID = {}\n    ID['id'] = book_id\n\n    form = borrowForm()\n    return render(request, 'BMS/borrow.html', {'ID':ID, 'time':time, 'form':form})\n\n\ndef borrowRecord(request):\n    return render(request, 'BMS/borrowRecord.html')\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- BMS/views.py	(revision 8cff9ebe5b78b48501baa3f047f50117bfdc0056)
+++ BMS/views.py	(date 1592753967536)
@@ -48,9 +48,10 @@
 
 @login_required(login_url='login')
 def mainPage(request):
+
     return render(request, 'BMS/mainpage.html')
 
-
+@login_required(login_url='login')
 def registerPage(request):
     form = CreateUserForm()
 
@@ -115,12 +116,12 @@
     context = {'form': form}
     return render(request, 'BMS/Login.html', context)
 
-
+@login_required(login_url='login')
 def logoutUser(request):
     logout(request)
     return redirect('login')
 
-
+@login_required(login_url='login')
 def addBooks(request):
     form = addBooksForm()
     if request.method == 'POST':
@@ -138,7 +139,7 @@
     context = {'form': form}
     return render(request, 'BMS/addBooks.html', context)
 
-
+@login_required(login_url='login')
 def buildBooks(request):
     form = buildbookForm()
     if request.method == 'POST':
@@ -177,7 +178,10 @@
                     count_borrow[book.ISBN] = count_temp['ID__count']
                 if book.ISBN not in count_borrow2:
                     count_borrow2[book.ISBN] = count_temp2['ID__count']
-            context = {'books': books, 'count_borrow': count_borrow}
+            paginator = Paginator(books, 7)
+            page = request.GET.get('page')
+            books = paginator.get_page(page)
+            context = {'books': books, 'count_borrow': count_borrow, 'count_borrow2':count_borrow2}
             return render(request, 'BMS/queryBookInfo.html', context, )
         else:
             books = booklist.objects.filter(ISBN=condition)
@@ -191,7 +195,10 @@
                     count_borrow[book.ISBN] = count_temp['ID__count']
                 if book.ISBN not in count_borrow2:
                     count_borrow2[book.ISBN] = count_temp2['ID__count']
-            context = {'books': books, 'count_borrow': count_borrow}
+            paginator = Paginator(books, 7)
+            page = request.GET.get('page')
+            books = paginator.get_page(page)
+            context = {'books': books, 'count_borrow': count_borrow, 'count_borrow2':count_borrow2}
             return render(request, 'BMS/queryBookInfo.html', context, )
 
     books = booklist.objects.all()
@@ -223,6 +230,9 @@
 
 def Reservation(request):
     form = reservationForm()
+    ISBN_ID = request.GET.get('ISBN')
+    ISBN_id = {}
+    ISBN_id['id'] = ISBN_ID
     if request.method == 'POST':
         postcontent = request.POST.copy()
         print('post=', postcontent)
@@ -232,23 +242,23 @@
 
         print('form=',form.data)
         print('length=',form.data['reserveLength'])
-        print('isbn=', form.data['ISBN_id'])
+        # print('isbn=', form.data['ISBN_id'])
         print('readerId=',form.data['readerId_id'])
         print(form.is_valid())
         if len(userlist) > 0:
             reader_obj = readers.objects.get(readerId=form.data['readerId_id'])
-            booklist_obj =  booklist.objects.get(ISBN=form.data['ISBN_id'])
+            booklist_obj =  booklist.objects.get(ISBN=ISBN_ID)
             result = reservation.objects.filter(readerId = reader_obj, ISBN = booklist_obj).values('id')
             if len(result) == 0:
                 messages.success(request, "预约成功")
                 reservation.objects.create(readerId = reader_obj, ISBN = booklist_obj, reserveLength=form.data['reserveLength'])
-                return redirect('reservation')
+                return redirect('mainPage')
             messages.error(request, "该用户已经预约过该图书")
-            return redirect('reservation')
+            return redirect('querybookinfo')
         else:
             messages.error(request, "该用户不存在，请重新输入")
-            return redirect('reservation')
-    context = {'form': form}
+            return HttpResponseRedirect("/reservation/?ISBN="+ISBN_ID)
+    context = {'form': form, 'isbn':ISBN_id}
     return render(request, 'BMS/reservation.html', context)
 
 def reservationRecord(request):
@@ -337,4 +347,30 @@
 
 
 def borrowRecord(request):
-    return render(request, 'BMS/borrowRecord.html')
+    if request.method == 'POST':
+        sec = request.POST.get('serc')
+        condition = request.POST.get('condition')
+        if sec == 'book':
+            borrow_record = borrow.objects.filter(bookId=condition)
+        else:
+            borrow_record = borrow.objects.filter(readerId=condition)
+        paginator = Paginator(borrow_record, 7)
+        page = request.GET.get('page')
+        borrow_record = paginator.get_page(page)
+        context = {'borrows':borrow_record}
+        return render(request, 'BMS/borrowRecord.html', context)
+    else:
+        borrow_record = borrow.objects.all()
+        paginator = Paginator(borrow_record, 7)
+        page = request.GET.get('page')
+        borrow_record = paginator.get_page(page)
+        context = {'borrows':borrow_record}
+        return render(request, 'BMS/borrowRecord.html', context)
+
+def returnBook(request):
+    if request.method == 'POST':
+        pass
+    borrow_id = request.GET.get('ID')
+    borrow_record = borrow.objects.get(id=borrow_id)
+    context = {'borrow':borrow_record}
+    return render(request, 'BMS/return.html',context)
Index: templates/BMS/borrowRecord.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{% load static %}\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<script type=\"text/javascript\" src=\"{% static 'utils/scripts/flat-ui.js' %}\"></script>\r\n<meta name=\"viewport\"\r\n\tcontent=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\">\r\n<link rel=\"shortcut icon\" href=\"{% static 'utils/image/favicon.ico' %}\"\r\n\ttype=\"image/x-icon\" />\r\n<meta charset=\"UTF-8\">\r\n<title>图书管理系统</title>\r\n\r\n<!-- 标题图标、CSS、js、jQ -->\r\n<script type=\"text/javascript\" src=\"{% static 'utils/js/jquery-3.3.1.min.js' %}\"></script>\r\n<!-- Loading Bootstrap -->\r\n<link href=\"{% static 'utils/css/vendor/bootstrap.min.css' %}\" rel=\"stylesheet\">\r\n<!-- Loading Flat UI Pro -->\r\n<link href=\"{% static 'utils/css/flat-ui.css' %}\" rel=\"stylesheet\">\r\n<!-- Loading Flat UI JS -->\r\n<script type=\"text/javascript\" src=\"{% static 'utils/scripts/flat-ui.min.js' %}\"></script>\r\n<script type='text/javascript' src=\"{% static 'utils/scripts/particles.js' &}\"></script><link href=\"{% static 'utils/css/animate.css' %}\" rel=\"stylesheet\"></head>\r\n\r\n<body>\r\n    {% include 'navbar.html' %}  \r\n\t<div class=\"container\">\r\n\t\t<div class=\"row\">\r\n\t\t\t<div class=\"col-md-12\">\r\n\t\t\t<h5>记录查询</h5>\r\n\t\t\t\t<form name=\"bookQuery\" action=\"#\" method=\"get\">\r\n\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t<div class=\"col-md-4\">\r\n\t\t\t\t\t\t\t<strong>查询条件<br></strong> <select name=\"serc\"\r\n\t\t\t\t\t\t\t\tclass=\"form-control select select-primary select-block mbl\">\r\n\t\t\t\t\t\t\t\t<option value=\"all\">图书Id</option>\r\n\t\t\t\t\t\t\t\t<option value=\"sid\">用户ID</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"col-md-4\">\r\n\t\t\t\t\t\t\t<strong>条件</strong>\r\n\t\t\t\t\t\t\t<div class=\"form-group has-feedback\">\r\n\t\t\t\t\t\t\t\t<input type=\"text\" name=\"condition\" placeholder=\"输入值\"\r\n\t\t\t\t\t\t\t\t\tclass=\"form-control\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"col-md-3 pos\">\r\n\t\t\t\t\t\t\t<br> <input type=\"submit\" class=\"btn btn-primary\" value=\"查询\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"col-md-12\">\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<div class=\"col-md-12\" >\r\n\t\t\t\t\t\t<div class=\"margin:0 15px\" style=\"overflow-x: scroll;\">\r\n\t\t\t\t\t\t<table\r\n\t\t\t\t\t\t\tclass=\"table table-striped table-hover animated fadeIn\">\r\n\r\n\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th>记录号</th>\r\n\t\t\t\t\t\t\t\t\t<th>借书日期</th>\r\n                                    <th>还书日期</th>\r\n                                    <th>状态</th>\r\n\t\t\t\t\t\t\t\t\t<th>图书ID</th>\r\n\t\t\t\t\t\t\t\t\t<th>读者ID</th>\r\n\t\t\t\t\t\t\t\t\t<th>还书</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t{% for borrow in borrows %}\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<td>{{ borrow.id }}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{ borrow.borrowTime }}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{ borrow.returnTime}}</td>\r\n                                    <td>{{ borrow.status}}</td>\r\n                                    <td>{{ borrow.bookId_id}}</td>\r\n                                    <td>{{ borrow.readerId_id}}</td>\r\n\t\t\t\t\t\t\t\t\t{% if {{borrow.status}} == \"外借\" %}\r\n\t\t\t\t\t\t\t\t\t\t<td><a class=\"btn btn-default\"\r\n\t\t\t\t\t\t\t\t\t\t\thref=\"#\"> 还书\r\n\t\t\t\t\t\t\t\t\t\t</a></td>\r\n\t\t\t\t\t\t\t\t\t{% else %}\r\n\t\t\t\t\t\t\t\t\t\t<td><a class=\"btn btn-default disabled\"\r\n\t\t\t\t\t\t\t\t\t\t\thref=\"#\"> 还书\r\n\t\t\t\t\t\t\t\t\t\t</a></td>\r\n\t\t\t\t\t\t\t\t\t{% endif %}\r\n\t\t\t\t\t\t\t\t</tr>\r\n                            {% endfor %}\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t\r\n\t\t<div class=\"row\">\r\n            <!--分页文字信息  -->\r\n            <div class=\"col-md-6\">当前 {{pageInfo.pageNum }}页,总{{pageInfo.pages }}\r\n                页,总{{pageInfo.total }} 条记录</div>\r\n            <!-- 分页条信息 -->\r\n            <div class=\"col-md-6\">\r\n                <nav aria-label=\"Page navigation\">\r\n                <ul class=\"pagination bg-primary\">\r\n                    <li><a href=\"#\">首页</a></li>\r\n                    {% for page_Num in pageInfo.pages %}\r\n                        {% if {{page_Num}} == {{pageInfo.pageNum}} %}\r\n                            <li class=\"active\"><a href=\"#\">{{page_Num }}</a></li>\r\n                        {% else %}\r\n                            <li><a href=\"#\">{{page_Num }}</a></li>\r\n                        {% endif %}\r\n                    {% endfor %}\r\n                    <li><a href=\"#\">末页</a></li>\r\n                </ul>\r\n                </nav>\r\n            </div>\r\n        </div>\r\n\t\r\n\t\t\r\n\t</div>\r\n\r\n\r\n\t<script>\r\n\t\t$(\"select\").select2({\r\n\t\t\tdropdownCssClass : 'dropdown-inverse'\r\n\t\t});\r\n\t</script>\r\n\t<script type=\"text/javascript\" src=\"{% static 'utils/scripts/flat-ui.js' %}\"></script>\r\n<script src=\"{% static 'utils/scripts/bganimation.js' %}\"></script></body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- templates/BMS/borrowRecord.html	(revision 8cff9ebe5b78b48501baa3f047f50117bfdc0056)
+++ templates/BMS/borrowRecord.html	(date 1592752427451)
@@ -2,128 +2,133 @@
 <!DOCTYPE html>
 <html>
 <head>
-<script type="text/javascript" src="{% static 'utils/scripts/flat-ui.js' %}"></script>
-<meta name="viewport"
-	content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
-<link rel="shortcut icon" href="{% static 'utils/image/favicon.ico' %}"
-	type="image/x-icon" />
-<meta charset="UTF-8">
-<title>图书管理系统</title>
+    <script type="text/javascript" src="{% static 'utils/scripts/flat-ui.js' %}"></script>
+    <meta name="viewport"
+          content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
+    <link rel="shortcut icon" href="{% static 'utils/image/favicon.ico' %}"
+          type="image/x-icon"/>
+    <meta charset="UTF-8">
+    <title>图书管理系统</title>
 
-<!-- 标题图标、CSS、js、jQ -->
-<script type="text/javascript" src="{% static 'utils/js/jquery-3.3.1.min.js' %}"></script>
-<!-- Loading Bootstrap -->
-<link href="{% static 'utils/css/vendor/bootstrap.min.css' %}" rel="stylesheet">
-<!-- Loading Flat UI Pro -->
-<link href="{% static 'utils/css/flat-ui.css' %}" rel="stylesheet">
-<!-- Loading Flat UI JS -->
-<script type="text/javascript" src="{% static 'utils/scripts/flat-ui.min.js' %}"></script>
-<script type='text/javascript' src="{% static 'utils/scripts/particles.js' &}"></script><link href="{% static 'utils/css/animate.css' %}" rel="stylesheet"></head>
+    <!-- 标题图标、CSS、js、jQ -->
+    <script type="text/javascript" src="{% static 'utils/js/jquery-3.3.1.min.js' %}"></script>
+    <!-- Loading Bootstrap -->
+    <link href="{% static 'utils/css/vendor/bootstrap.min.css' %}" rel="stylesheet">
+    <!-- Loading Flat UI Pro -->
+    <link href="{% static 'utils/css/flat-ui.css' %}" rel="stylesheet">
+    <!-- Loading Flat UI JS -->
+    <script type="text/javascript" src="{% static 'utils/scripts/flat-ui.min.js' %}"></script>
+    <script type='text/javascript' src="{% static 'utils/scripts/particles.js' %}"></script>
+    <link href="{% static 'utils/css/animate.css' %}" rel="stylesheet">
+</head>
 
 <body>
-    {% include 'navbar.html' %}  
-	<div class="container">
-		<div class="row">
-			<div class="col-md-12">
-			<h5>记录查询</h5>
-				<form name="bookQuery" action="#" method="get">
-					<div class="row">
-						<div class="col-md-4">
-							<strong>查询条件<br></strong> <select name="serc"
-								class="form-control select select-primary select-block mbl">
-								<option value="all">图书Id</option>
-								<option value="sid">用户ID</option>
-							</select>
-						</div>
-						<div class="col-md-4">
-							<strong>条件</strong>
-							<div class="form-group has-feedback">
-								<input type="text" name="condition" placeholder="输入值"
-									class="form-control" />
-							</div>
-						</div>
-						<div class="col-md-3 pos">
-							<br> <input type="submit" class="btn btn-primary" value="查询" />
-						</div>
-					</div>
-				</form>
-			</div>
-			<div class="col-md-12">
-				<div class="row">
-					<div class="col-md-12" >
-						<div class="margin:0 15px" style="overflow-x: scroll;">
-						<table
-							class="table table-striped table-hover animated fadeIn">
+{% include 'BMS/navbar.html' %}
+<div class="container">
+    <div class="row">
+        <div class="col-md-12">
+            <h5>记录查询</h5>
+            <form name="bookQuery" action="#" method="POST">
+                {% csrf_token %}
+                <div class="row">
+                    <div class="col-md-4">
+                        <strong>查询条件<br></strong> <select name="serc"
+                                                          class="form-control select select-primary select-block mbl">
+                        <option value="book">图书ID</option>
+                        <option value="reader">用户ID</option>
+                    </select>
+                    </div>
+                    <div class="col-md-4">
+                        <strong>条件</strong>
+                        <div class="form-group has-feedback">
+                            <input type="text" name="condition" placeholder="输入值"
+                                   class="form-control"/>
+                        </div>
+                    </div>
+                    <div class="col-md-3 pos">
+                        <br> <input type="submit" class="btn btn-primary" value="查询"/>
+                    </div>
+                </div>
+            </form>
+        </div>
+        <div class="col-md-12">
+            <div class="row">
+                <div class="col-md-12">
+                    <div class="margin:0 15px" style="overflow-x: scroll;">
+                        <table
+                                class="table table-striped table-hover animated fadeIn">
 
-							<thead>
-								<tr>
-									<th>记录号</th>
-									<th>借书日期</th>
-                                    <th>还书日期</th>
-                                    <th>状态</th>
-									<th>图书ID</th>
-									<th>读者ID</th>
-									<th>还书</th>
-								</tr>
-							</thead>
-							{% for borrow in borrows %}
-								<tr>
-									<td>{{ borrow.id }}</td>
-									<td>{{ borrow.borrowTime }}</td>
-									<td>{{ borrow.returnTime}}</td>
-                                    <td>{{ borrow.status}}</td>
-                                    <td>{{ borrow.bookId_id}}</td>
-                                    <td>{{ borrow.readerId_id}}</td>
-									{% if {{borrow.status}} == "外借" %}
-										<td><a class="btn btn-default"
-											href="#"> 还书
-										</a></td>
-									{% else %}
-										<td><a class="btn btn-default disabled"
-											href="#"> 还书
-										</a></td>
-									{% endif %}
-								</tr>
+                            <thead>
+                            <tr>
+                                <th>记录号</th>
+                                <th>借书日期</th>
+                                <th>还书日期</th>
+                                <th>状态</th>
+                                <th>图书ID</th>
+                                <th>读者ID</th>
+                                <th>还书</th>
+                            </tr>
+                            </thead>
+                            {% for borrow in borrows %}
+                                <tr>
+                                    <td>{{ borrow.id }}</td>
+                                    <td>{{ borrow.borrowTime }}</td>
+                                    <td>{{ borrow.returnTime }}</td>
+                                    <td>{{ borrow.status }}</td>
+                                    <td>{{ borrow.bookId_id }}</td>
+                                    <td>{{ borrow.readerId_id }}</td>
+                                    {% if borrow.status == "未归还" %}
+                                        <td><a class="btn btn-info"
+                                               href="{% url 'returnBook' %}?ID={{ borrow.id }}"> 还书
+                                        </a></td>
+                                    {% else %}
+                                        <td><a class="btn btn-default disabled"
+                                               href="#"> 还书
+                                        </a></td>
+                                    {% endif %}
+                                </tr>
                             {% endfor %}
-						</table>
-						</div>
-					</div>
-				</div>
-			</div>
-		</div>
-		
-		
-		<div class="row">
-            <!--分页文字信息  -->
-            <div class="col-md-6">当前 {{pageInfo.pageNum }}页,总{{pageInfo.pages }}
-                页,总{{pageInfo.total }} 条记录</div>
-            <!-- 分页条信息 -->
-            <div class="col-md-6">
-                <nav aria-label="Page navigation">
+                        </table>
+                    </div>
+                </div>
+            </div>
+        </div>
+    </div>
+
+
+    <div class="row">
+        <!--分页文字信息  -->
+        <div class="col-md-6">当前 {{ borrows.number }}页,总{{ borrows.paginator.num_pages }}
+            页,总{{ borrows.paginator.count }} 条记录
+        </div>
+        <!-- 分页条信息 -->
+        <div class="col-md-6">
+            <nav aria-label="Page navigation">
                 <ul class="pagination bg-primary">
-                    <li><a href="#">首页</a></li>
-                    {% for page_Num in pageInfo.pages %}
-                        {% if {{page_Num}} == {{pageInfo.pageNum}} %}
-                            <li class="active"><a href="#">{{page_Num }}</a></li>
+                    <li><a href="?page=1">首页</a></li>
+                    {% for page_Num in borrows.paginator.page_range %}
+                        {% if page_Num == borrows.number %}
+                            <li class="active"><a href="#">{{ page_Num }}</a></li>
                         {% else %}
-                            <li><a href="#">{{page_Num }}</a></li>
+                            <li><a href="#">{{ page_Num }}</a></li>
                         {% endif %}
                     {% endfor %}
-                    <li><a href="#">末页</a></li>
+                    <li><a href="?page={{ borrows.paginator.num_pages }}">末页</a></li>
                 </ul>
-                </nav>
-            </div>
-        </div>
-	
-		
-	</div>
+            </nav>
+        </div>
+    </div>
+
+
+</div>
 
 
-	<script>
-		$("select").select2({
-			dropdownCssClass : 'dropdown-inverse'
-		});
-	</script>
-	<script type="text/javascript" src="{% static 'utils/scripts/flat-ui.js' %}"></script>
-<script src="{% static 'utils/scripts/bganimation.js' %}"></script></body>
+<script>
+    $("select").select2({
+        dropdownCssClass: 'dropdown-inverse'
+    });
+</script>
+<script type="text/javascript" src="{% static 'utils/scripts/flat-ui.js' %}"></script>
+<script src="{% static 'utils/scripts/bganimation.js' %}"></script>
+</body>
 </html>
\ No newline at end of file
Index: BMS/models.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.db import models\nfrom phonenumber_field.modelfields import PhoneNumberField\nfrom django.contrib.auth.models import AbstractUser\n\n# Create your models here.\n\nclass bms_admin(AbstractUser):\n    gh = models.CharField(primary_key=True, null=False, max_length=80, unique=True)\n    username = models.CharField(max_length=80, null=True, unique=True)\n    password = models.CharField(max_length=256, null=True)\n\nclass readers(models.Model):\n    username = models.CharField(null=True, max_length=80)\n    readerId = models.CharField(primary_key=True, null=False, max_length=80)\n    phoneNumber = PhoneNumberField(null=True)\n    email = models.EmailField(null=True, unique=True)\n    balance = models.DecimalField(max_digits=8, decimal_places=3, default=100.000)\n    password = models.CharField(max_length=32, null=True)\n\nclass booklist(models.Model):\n    ISBN = models.CharField(primary_key=True, null=False, max_length=80)\n    bookName = models.CharField(null=True, max_length=80)\n    author = models.CharField(null=True, max_length=80)\n    publisher = models.CharField(null=True, max_length=80)\n    pub_date = models.DateField(null=True)\n    count = models.IntegerField(null=True)\n    def __str__(self):\n        return self.ISBN\n\nclass books(models.Model):\n    STATUS = (\n        ('已预约', '已预约'),\n        ('未借出', '未借出'),\n        ('不外借', '不外借'),\n        ('已借出', '已借出'),\n    )\n\n    POSITIONS = (\n        ('图书阅览室', '图书阅览室'),\n        ('图书流通室', '图书流通室'),\n    )\n\n    ID = models.CharField(primary_key=True, null=False, max_length=80)\n    position = models.CharField(null=True, max_length=80, choices=POSITIONS)\n    status = models.CharField(default='架上', choices=STATUS, max_length=80)\n    ISBN = models.ForeignKey(booklist, on_delete=models.CASCADE)\n\nclass borrow(models.Model):\n    STATUS = (\n        ('未归还', '未归还'),\n        ('已归还', '已归还'),\n    )\n\n    readerId = models.ForeignKey(readers, on_delete=models.CASCADE)\n    bookId = models.ForeignKey(books, on_delete=models.CASCADE)\n    borrowTime = models.DateField()\n    status = models.CharField(choices=STATUS, max_length=80)\n    returnTime = models.DateField()\n\nclass reservation(models.Model):\n    reserveTime = models.DateField(auto_now_add=True)\n    reserveLength = models.IntegerField()\n    ISBN = models.ForeignKey(booklist, on_delete=models.CASCADE, default='null')\n    readerId = models.ForeignKey(readers, on_delete=models.CASCADE)\n    ##bookId = models.ForeignKey(books, on_delete=models.CASCADE)\n\n\n\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- BMS/models.py	(revision 8cff9ebe5b78b48501baa3f047f50117bfdc0056)
+++ BMS/models.py	(date 1592754598323)
@@ -58,10 +58,16 @@
     returnTime = models.DateField()
 
 class reservation(models.Model):
+    STATUS = (
+        ('书已入库', '书已入库'),
+        ('书未入库', '书未入库'),
+    )
+
     reserveTime = models.DateField(auto_now_add=True)
     reserveLength = models.IntegerField()
     ISBN = models.ForeignKey(booklist, on_delete=models.CASCADE, default='null')
     readerId = models.ForeignKey(readers, on_delete=models.CASCADE)
+    status = models.CharField(null=True, max_length=80, choices=STATUS)
     ##bookId = models.ForeignKey(books, on_delete=models.CASCADE)
 
 
Index: templates/BMS/return.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- templates/BMS/return.html	(date 1592753684153)
+++ templates/BMS/return.html	(date 1592753684153)
@@ -0,0 +1,65 @@
+{% load static %}
+<!DOCTYPE html>
+<html>
+<head>
+    <script type="text/javascript" src="{% static 'utils/scripts/flat-ui.js' %}"></script>
+    <meta name="viewport"
+        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
+    <link rel="shortcut icon" href="{% static 'utils/image/favicon.ico' %}"
+        type="image/x-icon" />
+    <meta charset="UTF-8">
+    <title>图书管理系统</title>
+    
+    <!-- 标题图标、CSS、js、jQ -->
+    <script type="text/javascript" src="{% static 'utils/js/jquery-3.3.1.min.js' %}"></script>
+    <!-- Loading Bootstrap -->
+    <link href="{% static 'utils/css/vendor/bootstrap.min.css' %}" rel="stylesheet">
+    <!-- Loading Flat UI Pro -->
+    <link href="{% static 'utils/css/flat-ui.css' %}" rel="stylesheet">
+    <!-- Loading Flat UI JS -->
+    <script type="text/javascript" src="{% static 'utils/scripts/flat-ui.min.js' %}"></script>
+    <script type='text/javascript' src="{% static 'utils/scripts/particles.js' %}"></script><link href="{% static 'utils/css/animate.css' %}" rel="stylesheet"></head>
+    
+<body>
+{% include 'BMS/navbar.html' %}
+	<div class="container">
+		<div class="row">
+			<div class="col-md-12">
+				<h5>确认还书</h5>
+				<div class="alert alert-info" role="alert">
+                    <h5>记录号</h5>
+                    <p>{{ borrow.id }}</p>
+                    
+					<h5>读者ID</h5>
+					<p>{{ borrow.readerId_id}}</p>
+
+					<h5>图书ID</h5>
+                    <p>{{ borrow.bookId_id}}</p>
+                    
+                    <h5>逾期罚款</h5>
+                    <p>{{ borrow.money}}</p>
+				</div>
+			</div>
+			<div class="col-md-12">
+				<div class="row">
+					<div class="col-sm-3" style="margin-top:1rem">
+						<form action="#" method="post">
+                            {% csrf_token %}
+                            <input type="hidden" name="borrow.id" value="{{  borrow.id }}" /> 
+                            <input type="hidden" name="borrow.readerId_id" value="{{ borrow.readerId_id }}" /> 
+                            <input type="hidden" name="borrow.money" value="{{ borrow.money }}" /> 
+                            <input type="submit" class="btn btn-primary btn-wide login-btn" value="确定还书" />
+						</form>
+
+					</div>
+					<div class="col-sm-3" style="margin-top:1rem">
+							<input type="button" class="btn btn-primary btn-wide login-btn" value="取消还书" onclick="window.history.back()"/>
+					</div>
+				</div>
+			</div>	
+		</div>
+	</div>
+
+	<script type="text/javascript" src="{% static 'utils/scripts/flat-ui.js' %}"></script>
+<script src="{% static 'utils/scripts/bganimation.js' %}"></script></body>
+</html>
\ No newline at end of file
Index: templates/BMS/queryBookInfo.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{% load static %}\r\n{% load generalfilters %}\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<script type=\"text/javascript\" src=\"{% static 'utils/scripts/flat-ui.js' %}\"></script>\r\n<meta name=\"viewport\"\r\n\tcontent=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\">\r\n<link rel=\"shortcut icon\" href=\"{% static 'utils/image/favicon.ico' %}\"\r\n\ttype=\"image/x-icon\" />\r\n<meta charset=\"UTF-8\">\r\n<title>图书管理系统</title>\r\n\r\n<!-- 标题图标、CSS、js、jQ -->\r\n<script type=\"text/javascript\" src=\"{% static 'utils/js/jquery-3.3.1.min.js' %}\"></script>\r\n<!-- Loading Bootstrap -->\r\n<link href=\"{% static 'utils/css/vendor/bootstrap.min.css' %}\" rel=\"stylesheet\">\r\n<!-- Loading Flat UI Pro -->\r\n<link href=\"{% static 'utils/css/flat-ui.css' %}\" rel=\"stylesheet\">\r\n<!-- Loading Flat UI JS -->\r\n<script type=\"text/javascript\" src=\"{% static 'utils/scripts/flat-ui.min.js' %}\"></script>\r\n<script type='text/javascript' src=\"{% static 'utils/scripts/particles.js' %}\"></script>\r\n    <link href=\"{% static 'utils/css/animate.css' %}\" rel=\"stylesheet\"></head>\r\n\r\n<body>\r\n    {% include 'BMS/navbar.html' %}\r\n\t<div class=\"container\">\r\n\t\t<div class=\"row\">\r\n\t\t\t<div class=\"col-md-12\">\r\n\t\t\t<h5>图书查询</h5>\r\n\t\t\t\t<form name=\"bookQuery\" action=\"#\" method=\"POST\">\r\n                    {% csrf_token %}\r\n\t\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t\t<div class=\"col-md-4\">\r\n\t\t\t\t\t\t\t<strong>查询条件<br></strong> <select name=\"serc\"\r\n\t\t\t\t\t\t\t\tclass=\"form-control select select-primary select-block mbl\">\r\n\t\t\t\t\t\t\t\t<option value=\"all\">书名</option>\r\n\t\t\t\t\t\t\t\t<option value=\"sid\">按ISBN查询</option>\r\n\t\t\t\t\t\t\t</select>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"col-md-4\">\r\n\t\t\t\t\t\t\t<strong>条件</strong>\r\n\t\t\t\t\t\t\t<div class=\"form-group has-feedback\">\r\n\t\t\t\t\t\t\t\t<input type=\"text\" name=\"condition\" placeholder=\"输入值\"\r\n\t\t\t\t\t\t\t\t\tclass=\"form-control\" />\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t<div class=\"col-md-3 pos\">\r\n\t\t\t\t\t\t\t<br> <input type=\"submit\" class=\"btn btn-primary\" value=\"查询\" />\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"col-md-12\">\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<div class=\"col-md-12\" >\r\n\t\t\t\t\t\t<div class=\"margin:0 15px\" style=\"overflow-x: scroll;\">\r\n\t\t\t\t\t\t<table\r\n\t\t\t\t\t\t\tclass=\"table table-striped table-hover animated fadeIn\">\r\n\r\n\t\t\t\t\t\t\t<thead>\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<th>书名</th>\r\n\t\t\t\t\t\t\t\t\t<th>ISBN</th>\r\n\t\t\t\t\t\t\t\t\t<th>作者</th>\r\n\t\t\t\t\t\t\t\t\t<th>总数</th>\r\n\t\t\t\t\t\t\t\t\t<th>已借数目</th>\r\n                                    <th>不可借数</th>\r\n\t\t\t\t\t\t\t\t\t<th>借书</th>\r\n\t\t\t\t\t\t\t\t\t<th>预约</th>\r\n\t\t\t\t\t\t\t\t</tr>\r\n\t\t\t\t\t\t\t</thead>\r\n\t\t\t\t\t\t\t{% for book in books %}\r\n\t\t\t\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t\t\t\t<td>{{ book.bookName }}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{ book.ISBN }}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{ book.author }}</td>\r\n\t\t\t\t\t\t\t\t\t<td>{{ book.count }}</td>\r\n                                    <td>{{ count_borrow|get_item:book.ISBN }}</td>\r\n                                    <td>{{ count_borrow2|get_item:book.ISBN }}</td>\r\n                                    {% if book.count == count_borrow|get_item:book.ISBN|add_item:count_borrow2 %}\r\n\t\t\t\t\t\t\t\t\t    <td><a class=\"btn btn-default disabled\"\r\n\t\t\t\t\t\t\t\t\t\t    href=\"#\"> 借书\r\n                                        </a></td>\r\n                                    {% else %}\r\n                                        <td><a class=\"btn btn-info\"\r\n                                            href=\"{% url 'querybook' %}?ISBN={{ book.ISBN }}\"> 借书\r\n                                        </a></td>\r\n                                    {% endif %}\r\n\t\t\t\t\t\t\t\t\t{% if book.count == count_borrow|get_item:book.ISBN|add_item:count_borrow2 %}\r\n\t\t\t\t\t\t\t\t\t    <td><a class=\"btn btn-info\"\r\n\t\t\t\t\t\t\t\t\t\t    href=\"#\"> 预约\r\n                                        </a></td>\r\n                                    {% else %}\r\n                                        <td><a class=\"btn btn-default disabled\"\r\n                                            href=\"#\"> 预约\r\n                                        </a></td>\r\n                                    {% endif %}\r\n\t\t\t\t\t\t\t\t</tr>\r\n                            {% endfor %}\r\n\t\t\t\t\t\t</table>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t\t\r\n\t\t<div class=\"row\">\r\n            <!--分页文字信息  -->\r\n            <div class=\"col-md-6\">当前 {{books.number}}页,总{{books.paginator.num_pages }}\r\n                页,总{{books.paginator.count }} 条记录</div>\r\n            <!-- 分页条信息 -->\r\n            <div class=\"col-md-6\">\r\n                <nav aria-label=\"Page navigation\">\r\n                <ul class=\"pagination bg-primary\">\r\n                    <li><a href=\"?page=1\">首页</a></li>\r\n                    {% for page_Num in books.paginator.page_range %}\r\n                        {% if page_Num == books.number %}\r\n                            <li class=\"active\"><a href=\"?page={{ page_Num }}\">{{page_Num }}</a></li>\r\n                        {% else %}\r\n                            <li><a href=\"?page={{ page_Num }}\">{{page_Num }}</a></li>\r\n                        {% endif %}\r\n                    {% endfor %}\r\n                    <li><a href=\"?page={{ books.paginator.num_pages }}\">末页</a></li>\r\n                </ul>\r\n                </nav>\r\n            </div>\r\n        </div>\r\n\t\r\n\t\t\r\n\t</div>\r\n\r\n\r\n\t<script>\r\n\t\t$(\"select\").select2({\r\n\t\t\tdropdownCssClass : 'dropdown-inverse'\r\n\t\t});\r\n\t</script>\r\n\t<script type=\"text/javascript\" src=\"{% static 'utils/scripts/flat-ui.js' %}\"></script>\r\n<script src=\"{% static 'utils/scripts/bganimation.js' %}\"></script></body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- templates/BMS/queryBookInfo.html	(revision 8cff9ebe5b78b48501baa3f047f50117bfdc0056)
+++ templates/BMS/queryBookInfo.html	(date 1592713138461)
@@ -89,7 +89,7 @@
                                     {% endif %}
 									{% if book.count == count_borrow|get_item:book.ISBN|add_item:count_borrow2 %}
 									    <td><a class="btn btn-info"
-										    href="#"> 预约
+										    href="{% url 'reservation' %}?ISBN={{ book.ISBN }}"> 预约
                                         </a></td>
                                     {% else %}
                                         <td><a class="btn btn-default disabled"
Index: templates/BMS/reservation.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>{% load static %}\r\n<!DOCTYPE html>\r\n<html>\r\n<head>\r\n<script type=\"text/javascript\" src=\"{% static 'utils/scripts/flat-ui.js' %}\"></script>\r\n<meta name=\"viewport\"\r\n\r\n\tcontent=\"width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no\">\r\n<link rel=\"shortcut icon\" href=\"{% static 'utils/image/favicon.ico' %}\"\r\n\ttype=\"image/x-icon\" />\r\n<meta charset=\"UTF-8\">\r\n<title>图书管理系统</title>\r\n\r\n\r\n<script type=\"text/javascript\" src=\"{% static 'utils/js/jquery-3.3.1.min.js' %}\"></script>\r\n<!-- Loading Bootstrap -->\r\n<link href=\"{% static 'utils/css/vendor/bootstrap.min.css' %}\" rel=\"stylesheet\">\r\n<!-- Loading Flat UI Pro -->\r\n<link href=\"{% static 'utils/css/flat-ui.css' %}\" rel=\"stylesheet\">\r\n<!-- Loading Flat UI JS -->\r\n<script type=\"text/javascript\" src=\"{% static 'utils/scripts/flat-ui.min.js' %}\"></script>\r\n\r\n<script type='text/javascript' src=\"{% static 'utils/scripts/particles.js' %}\"></script><link href=\"{% static 'utils/css/animate.css' %}\" rel=\"stylesheet\"></head>\r\n\r\n<body>\r\n\r\n    {% include 'BMS/navbar.html' %}\r\n\t{% if messages %}\r\n        {% for message in messages %}\r\n            {% if message.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}\r\n                <div class=\"alert alert-success\">\r\n                    <strong id =messages>{{ message }}!</strong>\r\n                </div>\r\n            {% endif %}\r\n            {% if message.level == DEFAULT_MESSAGE_LEVELS.ERROR %}\r\n                <div class=\"alert alert-danger\">\r\n                    <strong id =messages>{{ message }}!</strong>\r\n                </div>\r\n            {% endif %}\r\n\t{% endfor %}\r\n<!--\t        {% for field in form %}-->\r\n<!--    \t\t\t<div class=\"fieldWrapper\">-->\r\n<!--        \t\t    {{field.errors}}1{{field.label_tag}}-->\r\n<!--&lt;!&ndash;        \t\t{{ field.label_tag }} {{ field }}&ndash;&gt;-->\r\n<!--    \t\t\t</div>-->\r\n<!--\t        {% endfor %}-->\r\n<!--    {% endif %}-->\r\n\r\n\r\n\t<div class=\"container\">\r\n\t\t<div class=\"row\">\r\n\t\t\t<div class=\"col-md-12\">\r\n\t\t\t\t<h5>预约办理</h5>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"col-md-12\">\r\n\t\t\t\t<div class=\"row\">\r\n\t\t\t\t\t<div class=\"col-sm-3\" style=\"margin-top:1rem\">\r\n\t\t\t\t\t\t<form action=\"#\" method=\"post\">{% csrf_token %}\r\n\t\t\t\t\t\t\t<h5>预约保留时间</h5>\r\n\t\t\t\t\t\t\t\t<p>{{ form.reserveLength }}<p>\r\n                            <h5>ISBN</h5>\r\n                                <p>{{ form.ISBN_id }}</p>\r\n                            <h5>读者ID</h5>\r\n\t\t\t\t\t\t\t\t<p>{{ form.readerId_id }}</p>\r\n<!--                                <input type=\"text\" name=\"readerId_id\" id=\"readerId_id\" class=\"form-control\"></input> -->\r\n                            <br/>\r\n<!--                            <input type=\"hidden\" name=\"ISBN\" value={{ books.ISBN }} /> -->\r\n                            <input type=\"submit\" class=\"btn btn-primary btn-wide login-btn\" value=\"确认预约\" />\r\n\t\t\t\t\t\t</form>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\t\r\n\t\t</div>\r\n\t</div>\r\n\r\n\t<script type=\"text/javascript\" src=\"{% static 'utils/scripts/flat-ui.js' %}\"></script>\r\n<script src=\"{% static 'utils/scripts/bganimation.js' %}\"></script></body>\r\n</html>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- templates/BMS/reservation.html	(revision 8cff9ebe5b78b48501baa3f047f50117bfdc0056)
+++ templates/BMS/reservation.html	(date 1592713575463)
@@ -37,14 +37,14 @@
                     <strong id =messages>{{ message }}!</strong>
                 </div>
             {% endif %}
-	{% endfor %}
-<!--	        {% for field in form %}-->
-<!--    			<div class="fieldWrapper">-->
-<!--        		    {{field.errors}}1{{field.label_tag}}-->
-<!--&lt;!&ndash;        		{{ field.label_tag }} {{ field }}&ndash;&gt;-->
-<!--    			</div>-->
-<!--	        {% endfor %}-->
-<!--    {% endif %}-->
+	    {% endfor %}
+        {% for field in form %}
+
+            {{field.errors}}1{{field.label_tag}}
+            {{ field.label_tag }} {{ field }}
+
+        {% endfor %}
+    {% endif %}
 
 
 	<div class="container">
@@ -59,7 +59,7 @@
 							<h5>预约保留时间</h5>
 								<p>{{ form.reserveLength }}<p>
                             <h5>ISBN</h5>
-                                <p>{{ form.ISBN_id }}</p>
+                                <p>{{ isbn.id }}</p>
                             <h5>读者ID</h5>
 								<p>{{ form.readerId_id }}</p>
 <!--                                <input type="text" name="readerId_id" id="readerId_id" class="form-control"></input> -->
Index: BMS/forms.py
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>from django.forms import ModelForm\nfrom django.contrib.auth.forms import UserCreationForm\nfrom .models import *\nfrom django import forms\nfrom phonenumber_field.formfields import PhoneNumberField\n\nfrom .models import bms_admin, readers\n\n\nclass CreateUserForm(UserCreationForm):\n    readerId = forms.CharField(max_length=80, label='读者号')\n    email = forms.EmailField(label=\"邮箱\")\n    password1 = forms.CharField(max_length=32, label=\"密码\", widget=forms.PasswordInput)\n    password2 = forms.CharField(max_length=32, label='再次输入密码', widget=forms.PasswordInput(\n        attrs={'class': 'form-control', 'placeholder': u'与上面密码保持一致'}))\n    phoneNumber = PhoneNumberField(label='手机')\n\n    class Meta:\n        model = readers\n        fields = ['username', 'email', 'readerId', 'password1', 'password2', 'phoneNumber']\n        labels = {\n            'username': '姓名'\n        }\n\n\nclass CreateAdminForm(forms.Form):\n    gh = forms.CharField(label=u'工号', max_length=80, error_messages={'required': u'用户名不能为空'})\n    xm = forms.CharField(label=u'姓名', max_length=80, error_messages={'required': u'姓名不能为空'})\n    password1 = forms.CharField(label=u'密码', max_length=32, widget=forms.PasswordInput(),\n                                error_messages={'required': u'密码不能为空哦', 'min_length': u'密码长度不能小于6位哦'})\n    password2 = forms.CharField(label=u'确认密码', max_length=32,\n                                widget=forms.PasswordInput(\n                                    attrs={'class': 'form-control', 'placeholder': u'与上面密码保持一致'}),\n                                error_messages={'required': u'密码不能为空哦', 'min_length': u'密码长度不能小于6位哦'})\n\n\nclass loginForm(forms.Form):\n    gh = forms.CharField(label=u'工号', max_length=80, error_messages={'required': u'用户名不能为空'},\n                         widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'请输入工号'}))\n    password = forms.CharField(label=u'密码', max_length=32,\n                               widget=forms.PasswordInput(attrs={'class': 'form-control', 'placeholder': u'请输入密码'}),\n                               error_messages={'required': u'密码不能为空哦', 'min_length': u'密码长度不能小于6位哦'})\n\nclass buildbookForm(forms.ModelForm):\n    ISBN = forms.CharField(label=u'ISBN', max_length=80, error_messages={'required': u'ISBN号不能为空'},\n                           widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'请输入ISBN号'}))\n    bookName = forms.CharField(label=u'书名', max_length=80, error_messages={'required': u'书名不能为空'},\n                           widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'请输入书名'}))\n    author = forms.CharField(label=u'作者', max_length=80, error_messages={'required': u'作者不能为空'},\n                           widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'请输入作者'}))\n\n    class Meta:\n        model = booklist\n        fields = ['ISBN', 'bookName', 'author']\n\n\nclass addBooksForm(forms.ModelForm):\n    ID = forms.CharField(label=u'ISBN', max_length=80, error_messages={'required': u'图书ID号不能为空'},\n                           widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'请输入图书ID号'}),\n                            )\n    position = forms.CharField(label=u'位置', max_length=80, error_messages={'required': u'书名不能为空'},\n                           widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'请输入位置'}),\n                               )\n    status = forms.ChoiceField(label=u'状态', error_messages={'required': u'状态不能为空'},\n                           widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'请输入状态'}),\n                             initial='架上')\n    ISBN = forms.ModelChoiceField(label=u'ISBN_id', queryset=booklist.objects.all(),\n                                widget=forms.Select(attrs={\"class\": \"form-control\",'placeholder': u'请选择ISBN号'}))\n    class Meta:\n        model = books\n        fields = ['ID', 'position', 'status', 'ISBN']\n\n\nclass borrowForm(forms.ModelForm):\n    # bookId = forms.IntegerField(label=u'图书ID', max_value= 10000, min_value = 0, error_messages={'required': u'图书id号不能为空'},\n    #                         widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'请输入图书id号'}))\n    readerId = forms.CharField(label=u'读者ID', max_length= 80, min_length = 0, error_messages={'required': u'读者id号不能为空'},\n                            widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'请输入读者id号'}))\n    # status = forms.CharField(label=u'状态', max_length=80, initial='未归还')\n    # borrowTime = forms.DateField(label=u'借阅时间', error_messages={'required': u'借阅时间不能为空'},\n    #                              widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'xxxx-xx-xx'}))\n    # returnTime = forms.DateField(label=u'归还时间', error_messages={'required': u'归还时间不能为空'},\n    #                              widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'xxxx-xx-xx'}))\n    class Meta:\n        model = borrow\n        fields = '__all__'\n\nclass reservationForm(forms.ModelForm):\n    reserveTime = forms.DateField(label=u'预约日期')\n    reserveLength = forms.IntegerField(label=u'reserveLength', min_value=0, max_value=10, initial=10,\n                                       widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'请输入读者id号'}))\n    ISBN_id = forms.ModelChoiceField(label=u'ISBN', queryset=booklist.objects.all(),\n                                  widget=forms.Select(attrs={\"class\": \"form-control\", 'placeholder': u'请选择ISBN号'}))\n    readerId_id = forms.CharField(label=u'ReaderId', max_length=80, min_length=0, error_messages={'required': u'读者id号不能为空'},\n                               widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'请输入读者id号'}))\n    class Meta:\n        model = reservation\n        unique_together = ((\"ISBN_id\", \"readerId_id\"),)\n        #fields ='__all__'\n        fields = ['reserveLength','ISBN', 'readerId']\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- BMS/forms.py	(revision 8cff9ebe5b78b48501baa3f047f50117bfdc0056)
+++ BMS/forms.py	(date 1592713336921)
@@ -89,8 +89,8 @@
     reserveTime = forms.DateField(label=u'预约日期')
     reserveLength = forms.IntegerField(label=u'reserveLength', min_value=0, max_value=10, initial=10,
                                        widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'请输入读者id号'}))
-    ISBN_id = forms.ModelChoiceField(label=u'ISBN', queryset=booklist.objects.all(),
-                                  widget=forms.Select(attrs={"class": "form-control", 'placeholder': u'请选择ISBN号'}))
+    # ISBN_id = forms.ModelChoiceField(label=u'ISBN', queryset=booklist.objects.all(),
+    #                               widget=forms.Select(attrs={"class": "form-control", 'placeholder': u'请选择ISBN号'}))
     readerId_id = forms.CharField(label=u'ReaderId', max_length=80, min_length=0, error_messages={'required': u'读者id号不能为空'},
                                widget=forms.TextInput(attrs={'class': 'form-control', 'placeholder': u'请输入读者id号'}))
     class Meta:
Index: .idea/BMS_django.iml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<module type=\"PYTHON_MODULE\" version=\"4\">\n  <component name=\"FacetManager\">\n    <facet type=\"django\" name=\"Django\">\n      <configuration>\n        <option name=\"rootFolder\" value=\"$MODULE_DIR$\" />\n        <option name=\"settingsModule\" value=\"BMS_django/settings.py\" />\n        <option name=\"manageScript\" value=\"$MODULE_DIR$/manage.py\" />\n        <option name=\"environment\" value=\"&lt;map/&gt;\" />\n        <option name=\"doNotUseTestRunner\" value=\"false\" />\n        <option name=\"trackFilePattern\" value=\"migrations\" />\n      </configuration>\n    </facet>\n  </component>\n  <component name=\"NewModuleRootManager\">\n    <content url=\"file://$MODULE_DIR$\">\n      <excludeFolder url=\"file://$MODULE_DIR$/venv\" />\n    </content>\n    <orderEntry type=\"jdk\" jdkName=\"Python 3.7 (patternRecognition) (3)\" jdkType=\"Python SDK\" />\n    <orderEntry type=\"sourceFolder\" forTests=\"false\" />\n  </component>\n  <component name=\"TemplatesService\">\n    <option name=\"TEMPLATE_CONFIGURATION\" value=\"Django\" />\n    <option name=\"TEMPLATE_FOLDERS\">\n      <list>\n        <option value=\"D:/BMS_django\\templates\" />\n      </list>\n    </option>\n  </component>\n</module>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/BMS_django.iml	(revision 8cff9ebe5b78b48501baa3f047f50117bfdc0056)
+++ .idea/BMS_django.iml	(date 1592705138184)
@@ -16,7 +16,7 @@
     <content url="file://$MODULE_DIR$">
       <excludeFolder url="file://$MODULE_DIR$/venv" />
     </content>
-    <orderEntry type="jdk" jdkName="Python 3.7 (patternRecognition) (3)" jdkType="Python SDK" />
+    <orderEntry type="jdk" jdkName="Python 3.7" jdkType="Python SDK" />
     <orderEntry type="sourceFolder" forTests="false" />
   </component>
   <component name="TemplatesService">
Index: templates/BMS/navbar.html
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>\r\n{#<nav class=\"navbar navbar-inverse navbar-expand-lg\" role=\"navigation\">#}\r\n{#    <a class=\"navbar-brand\" href=\"#\">图书管理系统</a>#}\r\n{#    <button type=\"button\" class=\"navbar-toggler\" data-toggle=\"collapse\" data-target=\"#navbar-collapse-01\"></button>#}\r\n{#    <div class=\"collapse navbar-collapse\" id=\"navbar-collapse-01\">#}\r\n{#        <ul class=\"nav navbar-nav mr-auto\">#}\r\n{#            <li><a href=\"#\"><strong>图书查询</strong></a>#}\r\n{#            <li><a href=\"#\"><strong>借书记录</strong></a>#}\r\n{#            <li><a href=\"#\"><strong>预约记录</strong></a>#}\r\n{#            <li><a href=\"#\"><strong>录入图书</strong></a>#}\r\n{#            <li><a href=\"#\"><strong>注册用户</strong></a>#}\r\n{#        </ul>#}\r\n{##}\r\n{#        <p class=\"navbar-text navbar-right\">你好！<a href=\"#\" class=\"navbar-link\">注销</a></p>#}\r\n{#    </div>#}\r\n{#</nav>#}\r\n\r\n<style>\r\n    .hello-msg{\r\n        font-size: 18px;\r\n        color: #fff;\r\n        margin-right: 20px;\r\n    }\r\n</style>\r\n\r\n<nav class=\"navbar navbar-expand-lg navbar-dark bg-dark\">\r\n    <a class=\"navbar-brand\" href=\"{% url 'mainPage' %}\">图书管理系统</a>\r\n    <button class=\"navbar-toggler\" type=\"button\" data-toggle=\"collapse\" data-target=\"#navbarNav\"\r\n            aria-controls=\"navbarNav\" aria-expanded=\"false\" aria-label=\"Toggle navigation\">\r\n        <span class=\"navbar-toggler-icon\"></span>\r\n    </button>\r\n    <div class=\"collapse navbar-collapse \" id=\"navbarText\">\r\n        <ul class=\"navbar-nav mr-auto\">\r\n            <li class=\"nav-item active\">\r\n                <a class=\"nav-link\" href=\"{% url 'querybookinfo' %}\">借阅 <span class=\"sr-only\">(current)</span></a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n                <a class=\"nav-link\" href=\"{% url 'borrowrecord' %}\">借书记录</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n                <a class=\"nav-link\" href=\"#\">预约记录</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n                <a class=\"nav-link\" href=\"{% url 'addBooks' %}\">录入图书</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n                <a class=\"nav-link\" href=\"{% url 'buildbook' %}\">建立书目</a>\r\n            </li>\r\n            <li class=\"nav-item\">\r\n                <a class=\"nav-link\" href=\"{% url 'reservation' %}\">预约</a>\r\n            </li>\r\n        </ul>\r\n        {% if request.user.is_authenticated %}\r\n            <span class=\"hello-msg\">\r\n                你好！{{ request.user }}\r\n            </span>\r\n            <span class=\"hello-msg\">\r\n                <a href=\"{% url 'logout' %}\" class=\"navbar-link\">注销</a>\r\n            </span>\r\n        {% endif %}\r\n    </div>\r\n</nav>\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- templates/BMS/navbar.html	(revision 8cff9ebe5b78b48501baa3f047f50117bfdc0056)
+++ templates/BMS/navbar.html	(date 1592713637382)
@@ -32,22 +32,19 @@
     <div class="collapse navbar-collapse " id="navbarText">
         <ul class="navbar-nav mr-auto">
             <li class="nav-item active">
-                <a class="nav-link" href="{% url 'querybookinfo' %}">借阅 <span class="sr-only">(current)</span></a>
+                <a class="nav-link" href="{% url 'querybookinfo' %}">图书查询 <span class="sr-only">(current)</span></a>
             </li>
             <li class="nav-item">
                 <a class="nav-link" href="{% url 'borrowrecord' %}">借书记录</a>
             </li>
             <li class="nav-item">
-                <a class="nav-link" href="#">预约记录</a>
+                <a class="nav-link" href="{% url 'reservationRecord' %}">预约记录</a>
             </li>
             <li class="nav-item">
                 <a class="nav-link" href="{% url 'addBooks' %}">录入图书</a>
             </li>
             <li class="nav-item">
                 <a class="nav-link" href="{% url 'buildbook' %}">建立书目</a>
-            </li>
-            <li class="nav-item">
-                <a class="nav-link" href="{% url 'reservation' %}">预约</a>
             </li>
         </ul>
         {% if request.user.is_authenticated %}
Index: .idea/misc.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<project version=\"4\">\n  <component name=\"JavaScriptSettings\">\n    <option name=\"languageLevel\" value=\"ES6\" />\n  </component>\n  <component name=\"ProjectRootManager\" version=\"2\" project-jdk-name=\"Python 3.7 (patternRecognition) (3)\" project-jdk-type=\"Python SDK\" />\n  <component name=\"PyCharmProfessionalAdvertiser\">\n    <option name=\"shown\" value=\"true\" />\n  </component>\n</project>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- .idea/misc.xml	(revision 8cff9ebe5b78b48501baa3f047f50117bfdc0056)
+++ .idea/misc.xml	(date 1592705138186)
@@ -3,7 +3,7 @@
   <component name="JavaScriptSettings">
     <option name="languageLevel" value="ES6" />
   </component>
-  <component name="ProjectRootManager" version="2" project-jdk-name="Python 3.7 (patternRecognition) (3)" project-jdk-type="Python SDK" />
+  <component name="ProjectRootManager" version="2" project-jdk-name="Python 3.7" project-jdk-type="Python SDK" />
   <component name="PyCharmProfessionalAdvertiser">
     <option name="shown" value="true" />
   </component>
